function Banner(){this.bannerGroup=$("#banner-group"),this.index=0,this.bannerWidth=798,this.leftArrow=$(".left-arrow"),this.rightArrow=$(".right-arrow"),this.bannerUl=$("#banner-ul"),this.pageControl=$(".page-control"),this.liList=this.bannerUl.children("li"),this.bannerCount=this.liList.length}function Index(){var n=this;n.page=2,n.category_id=0,n.loadBtn=$("#load-more-btn"),template.defaults.imports.timeSince=function(n){var t=new Date(n),e=t.getTime(),i=((new Date).getTime()-e)/1e3;return i<60?"刚刚":60<=i&&i<3600?(minutes=parseInt(i/60),minutes+"分钟前"):3600<=i&&i<86400?(hours=parseInt(i/60/60),hours+"小时前"):86400<=i&&i<2592e3?(days=parseInt(i/60/60/24),days+"天前"):t.getFullYear()+"/"+t.getMonth()+"/"+t.getDay()+" "+t.getHours()+":"+t.getMinutes()}}Banner.prototype.run=function(){this.ininBanner(),this.loop(),this.toggelArrow(),this.listenBannerHover(),this.listenArrowClick(),this.initPageControl(),this.listenPageControl()},Banner.prototype.listenPageControl=function(){var e=this;e.pageControl.children("li").each(function(n,t){$(t).click(function(){e.index=n,e.animate()})})},Banner.prototype.listenBannerHover=function(){var n=this;this.bannerGroup.hover(function(){clearInterval(n.timer),n.toggelArrow()},function(){n.loop(),n.toggelArrow()})},Banner.prototype.listenArrowClick=function(){var n=this;this.leftArrow.click(function(){0===n.index?n.index=n.bannerCount-1:n.index--,n.animate()}),this.rightArrow.click(function(){n.index===n.bannerCount-1?n.index=0:n.index++,n.animate()})},Banner.prototype.initPageControl=function(){for(var n=this,t=$(".page-control"),e=0;e<n.bannerCount;e++){var i=$("<li></li>");t.append(i),0===e&&i.addClass("active")}t.css({width:12*n.bannerCount+16+16*(n.bannerCount-1)})},Banner.prototype.ininBanner=function(){this.bannerUl.css({width:this.bannerWidth*this.bannerCount})},Banner.prototype.animate=function(){var n=this;n.bannerUl.stop().animate({left:-798*n.index},500),n.pageControl.children("li").eq(n.index).addClass("active").siblings().removeClass("active")},Banner.prototype.toggelArrow=function(){this.leftArrow.toggle(),this.rightArrow.toggle()},Banner.prototype.loop=function(){$(".banner-ul");var n=this;this.timer=setInterval(function(){n.index>=n.bannerCount-1?n.index=0:n.index++,n.animate()},2e3)},Index.prototype.run=function(){this.LoadMore(),this.listenCategorySwitchEvent()},Index.prototype.LoadMore=function(){var i=this,r=$("#load-more-btn");r.click(function(){xfzajax.get({url:"/news/list/",data:{p:i.page,category_id:i.category_id},success:function(n){if(200===n.code){var t=n.data;if(0<t.length){var e=template("news-item",{newses:t});$(".list-inner-group").append(e),console.log(t),i.page+=1}else r.hide()}}})})},Index.prototype.listenCategorySwitchEvent=function(){var a=this;$(".list-tab").children().click(function(){var r=$(this),o=r.attr("data-category");xfzajax.get({url:"/news/list/",data:{category_id:o,p:1},success:function(n){if(200===n.code){var t=n.data,e=template("news-item",{newses:t}),i=$(".list-inner-group");i.empty(),i.append(e),a.page=2,a.category_id=o,r.addClass("active").siblings().removeClass("active"),a.loadBtn.show()}}})})},$(function(){(new Banner).run(),(new Index).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkJhbm5lciIsInRoaXMiLCJiYW5uZXJHcm91cCIsIiQiLCJpbmRleCIsImJhbm5lcldpZHRoIiwibGVmdEFycm93IiwicmlnaHRBcnJvdyIsImJhbm5lclVsIiwicGFnZUNvbnRyb2wiLCJsaUxpc3QiLCJjaGlsZHJlbiIsImJhbm5lckNvdW50IiwibGVuZ3RoIiwiSW5kZXgiLCJzZWxmIiwicGFnZSIsImNhdGVnb3J5X2lkIiwibG9hZEJ0biIsInRlbXBsYXRlIiwiZGVmYXVsdHMiLCJpbXBvcnRzIiwidGltZVNpbmNlIiwiZGF0ZVZhbHVlIiwiZGF0ZSIsIkRhdGUiLCJkYXRldHMiLCJnZXRUaW1lIiwidGltZXN0YW1wIiwibWludXRlcyIsInBhcnNlSW50IiwiaG91cnMiLCJkYXlzIiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsImdldERheSIsImdldEhvdXJzIiwiZ2V0TWludXRlcyIsInByb3RvdHlwZSIsInJ1biIsImluaW5CYW5uZXIiLCJsb29wIiwidG9nZ2VsQXJyb3ciLCJsaXN0ZW5CYW5uZXJIb3ZlciIsImxpc3RlbkFycm93Q2xpY2siLCJpbml0UGFnZUNvbnRyb2wiLCJsaXN0ZW5QYWdlQ29udHJvbCIsImVhY2giLCJvYmoiLCJjbGljayIsImFuaW1hdGUiLCJob3ZlciIsImNsZWFySW50ZXJ2YWwiLCJ0aW1lciIsImkiLCJjaXJjbGUiLCJhcHBlbmQiLCJhZGRDbGFzcyIsImNzcyIsIndpZHRoIiwic3RvcCIsImxlZnQiLCJlcSIsInNpYmxpbmdzIiwicmVtb3ZlQ2xhc3MiLCJ0b2dnbGUiLCJzZXRJbnRlcnZhbCIsIkxvYWRNb3JlIiwibGlzdGVuQ2F0ZWdvcnlTd2l0Y2hFdmVudCIsInhmemFqYXgiLCJnZXQiLCJ1cmwiLCJkYXRhIiwicCIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJuZXdzZXMiLCJ0cGwiLCJjb25zb2xlIiwibG9nIiwiaGlkZSIsImxpIiwiYXR0ciIsInVsIiwiZW1wdHkiLCJzaG93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LE1BQ05nQixFQUFjZ0UsRUFBR0MsS0FBSyxpQkFDM0JiLFFBQVFDLElBQUksQ0FDUkMsSUFBTSxjQUNOQyxLQUFPLENBQ0h2RCxZQUFjQSxFQUNkd0QsRUFQRyxHQVNQQyxRQUFVLFNBQVVDLEdBQ2hCLEdBQW9CLE1BQWpCQSxFQUFhLEtBQVEsQ0FDcEIsSUFBSUMsRUFBU0QsRUFBYSxLQUN0QkUsRUFBTTFELFNBQVMsWUFBYSxDQUFDeUQsT0FBVUEsSUFDdkNPLEVBQUtoRixFQUFFLHFCQUNYZ0YsRUFBR0MsUUFDSEQsRUFBRzNCLE9BQU9xQixHQUNWOUQsRUFBS0MsS0FBTyxFQUNaRCxFQUFLRSxZQUFjQSxFQUNuQmdFLEVBQUd4QixTQUFTLFVBQVVNLFdBQVdDLFlBQVksVUFDN0NqRCxFQUFLRyxRQUFRbUUsY0FVckNsRixFQUFFLFlBQ2MsSUFBSUgsUUFDVHVDLE9BQ0ksSUFBSXpCLE9BQ1R5QiIsImZpbGUiOiJpbmRleC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBCYW5uZXIoKSB7XG4gICAgdGhpcy5iYW5uZXJHcm91cCA9ICQoXCIjYmFubmVyLWdyb3VwXCIpO1xuICAgIHRoaXMuaW5kZXggPSAwO1xuICAgIC8v6L2u5rOi5Zu+5Lit5LiA5Liq6L2u5rOi5Zu+55qE5a695bqmXG4gICAgdGhpcy5iYW5uZXJXaWR0aD03OTg7XG5cbiAgICB0aGlzLmxlZnRBcnJvdz0kKCcubGVmdC1hcnJvdycpO1xuICAgIHRoaXMucmlnaHRBcnJvdz0kKCcucmlnaHQtYXJyb3cnKTtcbiAgICB0aGlzLmJhbm5lclVsID0kKCcjYmFubmVyLXVsJyk7XG4gICAgdGhpcy5wYWdlQ29udHJvbCA9ICQoJy5wYWdlLWNvbnRyb2wnKTtcbiAgICB0aGlzLmxpTGlzdCA9IHRoaXMuYmFubmVyVWwuY2hpbGRyZW4oJ2xpJyk7XG4gICAgLy/ova7ms6Llm77nmoTkuKrmlbBcbiAgICB0aGlzLmJhbm5lckNvdW50ID0gdGhpcy5saUxpc3QubGVuZ3RoO1xuXG59XG5cbkJhbm5lci5wcm90b3R5cGUucnVuPWZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdGhpcy5pbmluQmFubmVyKCk7XG4gICAgdGhpcy5sb29wKCk7XG4gICAgdGhpcy50b2dnZWxBcnJvdygpO1xuICAgIC8v55uR5ZCs6byg5qCH5YiS6L+H6L2u5rOi5Zu+55qE5LqL5Lu2XG4gICAgdGhpcy5saXN0ZW5CYW5uZXJIb3ZlcigpO1xuICAgIHRoaXMubGlzdGVuQXJyb3dDbGljaygpO1xuXG4gICAgc2VsZi5pbml0UGFnZUNvbnRyb2woKTtcbiAgICB0aGlzLmxpc3RlblBhZ2VDb250cm9sKCk7XG59O1xuXG4vL+ebkeWQrOi9ruazouWbvueahOWwj+eCueeCuSDnmoTngrnlh7vkuovku7ZcbkJhbm5lci5wcm90b3R5cGUubGlzdGVuUGFnZUNvbnRyb2wgPSBmdW5jdGlvbigpe1xuICAgIHZhciBzZWxmID10aGlzO1xuICAgIHNlbGYucGFnZUNvbnRyb2wuY2hpbGRyZW4oXCJsaVwiKS5lYWNoKGZ1bmN0aW9uIChpbmRleCxvYmopIHtcbiAgICAgICAgJChvYmopLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNlbGYuaW5kZXg9aW5kZXg7XG5cbiAgICAgICAgICAgIHNlbGYuYW5pbWF0ZSgpO1xuXG4gICAgICAgIH0pO1xuICAgIH0pO1xufTtcblxuXG5CYW5uZXIucHJvdG90eXBlLmxpc3RlbkJhbm5lckhvdmVyID0gZnVuY3Rpb24oKXtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdGhpcy5iYW5uZXJHcm91cC5ob3ZlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8v56ys5LiA5Liq5Ye95pWw5piv5oqK6byg5qCH56e75Yqo5Yiw6L2u5rOi5Zu+5LiK5omn6KGM55qE5Ye95pWwXG4gICAgICAgIGNsZWFySW50ZXJ2YWwoc2VsZi50aW1lcik7XG4gICAgICAgIHNlbGYudG9nZ2VsQXJyb3coKTtcbiAgICB9LGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy/nrKzkuozkuKrmlrnms5XmmK/miorpvKDmoIfku47ova7ms6Llm77kuIrnp7votbDml7bmiafooYznmoTlh73mlbBcbiAgICAgICAgc2VsZi5sb29wKCk7XG4gICAgICAgIHNlbGYudG9nZ2VsQXJyb3coKTtcbiAgICB9KVxufTtcblxuLy/nm5HlkKznrq3lpLTnmoTngrnlh7vkuovku7ZcbkJhbm5lci5wcm90b3R5cGUubGlzdGVuQXJyb3dDbGljayA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIC8v5bem6L6555qE566t5aS0XG4gICAgdGhpcy5sZWZ0QXJyb3cuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBpZihzZWxmLmluZGV4PT09MClcbiAgICAgICAge1xuICAgICAgICAgICAgc2VsZi5pbmRleCA9IHNlbGYuYmFubmVyQ291bnQtMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgIHtcbiAgICAgICAgICAgIHNlbGYuaW5kZXgtLTtcbiAgICAgICAgfVxuICAgICAgICBzZWxmLmFuaW1hdGUoKTtcbiAgICB9KTtcbiAgICAvL+WPs+i+ueeahOeureWktFxuICAgIHRoaXMucmlnaHRBcnJvdy5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmKHNlbGYuaW5kZXggPT09IHNlbGYuYmFubmVyQ291bnQtMSlcbiAgICAgICAge1xuICAgICAgICAgICAgc2VsZi5pbmRleD0wO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICAgICAgc2VsZi5pbmRleCsrO1xuICAgICAgICB9XG4gICAgICAgIC8vIHNlbGYuYmFubmVyVWwuYW5pbWF0ZSh7J2xlZnQnOi03OTgqc2VsZi5pbmRleH0sNTAwKTtcbiAgICAgICAgc2VsZi5hbmltYXRlKCk7XG4gICAgfSlcbn07XG5cbi8v5Yid5aeL5YyW6L2u5rOi5Zu+55qE5bCP54K554K5XG5CYW5uZXIucHJvdG90eXBlLmluaXRQYWdlQ29udHJvbCA9ZnVuY3Rpb24oKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBwYWdlQ29udHJvbCA9ICQoXCIucGFnZS1jb250cm9sXCIpO1xuICAgIGZvciAodmFyIGkgPTA7IGk8c2VsZi5iYW5uZXJDb3VudDsgaSsrKSB7XG4gICAgICAgIHZhciBjaXJjbGUgPSAkKFwiPGxpPjwvbGk+XCIpO1xuICAgICAgICBwYWdlQ29udHJvbC5hcHBlbmQoY2lyY2xlKTtcbiAgICAgICAgaWYoaT09PTApIHtcbiAgICAgICAgICAgICBjaXJjbGUuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHBhZ2VDb250cm9sLmNzcyh7XCJ3aWR0aFwiOnNlbGYuYmFubmVyQ291bnQqMTIrOCoyKzE2KihzZWxmLmJhbm5lckNvdW50LTEpfSlcbn07XG5cbi8v6K6+572u6L2u5rOi5Zu+55qE5oC75YWx55qE5a695bqmXG5CYW5uZXIucHJvdG90eXBlLmluaW5CYW5uZXIgPSBmdW5jdGlvbigpe1xuICAgIHZhciBzZWxmID10aGlzO1xuICAgIHRoaXMuYmFubmVyVWwuY3NzKHtcIndpZHRoXCI6c2VsZi5iYW5uZXJXaWR0aCpzZWxmLmJhbm5lckNvdW50fSlcbn07XG5cblxuLy/lsIHoo4XkuIDkuKrova7ms6Llm77np7vliqjnmoTmlrnms5VcbkJhbm5lci5wcm90b3R5cGUuYW5pbWF0ZSA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIHNlbGYgPXRoaXM7XG4gICAgc2VsZi5iYW5uZXJVbC5zdG9wKCkuYW5pbWF0ZSh7J2xlZnQnOi03OTgqc2VsZi5pbmRleH0sNTAwKTtcbiAgICBzZWxmLnBhZ2VDb250cm9sLmNoaWxkcmVuKCdsaScpLmVxKHNlbGYuaW5kZXgpLmFkZENsYXNzKCdhY3RpdmUnKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKVxufTtcblxuLy/nrq3lpLTnmoTmmL7npLrmiJbpmpDol49cbkJhbm5lci5wcm90b3R5cGUudG9nZ2VsQXJyb3cgPSBmdW5jdGlvbigpe1xuICAgIHZhciBzZWxmID10aGlzO1xuICAgIHNlbGYubGVmdEFycm93LnRvZ2dsZSgpO1xuICAgIHNlbGYucmlnaHRBcnJvdy50b2dnbGUoKTtcblxufTtcblxuQmFubmVyLnByb3RvdHlwZS5sb29wID0gZnVuY3Rpb24oKXtcbiAgICB2YXIgYmFubmVyVWwgPSAkKFwiLmJhbm5lci11bFwiKTtcbiAgICB2YXIgaW5kZXg9MDtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgLy8gYmFubmVyVWwuYW5pbWF0ZSh7XCJsZWZ0XCIgOiAtNzk4fSw1MDApO1xuICAgIHRoaXMudGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmKHNlbGYuaW5kZXg+PXNlbGYuYmFubmVyQ291bnQtMSlcbiAgICAgICAge1xuICAgICAgICAgICAgc2VsZi5pbmRleD0wO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuXG4gICAgICAgICAgICBzZWxmLmluZGV4Kys7XG4gICAgICAgIH1cbiAgICAgICAgc2VsZi5hbmltYXRlKCk7XG4gICAgfSwyMDAwKTtcbn07XG5cblxuZnVuY3Rpb24gSW5kZXgoKXtcbiAgIHZhciBzZWxmID10aGlzO1xuICAgc2VsZi5wYWdlPTI7XG4gICBzZWxmLmNhdGVnb3J5X2lkID0gMDtcbiAgIHNlbGYubG9hZEJ0biA9ICQoXCIjbG9hZC1tb3JlLWJ0blwiKTtcblxuICAgdGVtcGxhdGUuZGVmYXVsdHMuaW1wb3J0cy50aW1lU2luY2UgPSBmdW5jdGlvbiAoZGF0ZVZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKGRhdGVWYWx1ZSk7XG4gICAgICAgICAgICB2YXIgZGF0ZXRzID0gZGF0ZS5nZXRUaW1lKCk7IC8vIOW+l+WIsOeahOaYr+avq+enkueahFxuICAgICAgICAgICAgdmFyIG5vd3RzID0gKG5ldyBEYXRlKCkpLmdldFRpbWUoKTsgLy/lvpfliLDnmoTmmK/lvZPliY3ml7bpl7TnmoTml7bpl7TmiLNcbiAgICAgICAgICAgIHZhciB0aW1lc3RhbXAgPSAobm93dHMgLSBkYXRldHMpLzEwMDA7IC8vIOmZpOS7pTEwMDDvvIzlvpfliLDnmoTmmK/np5JcbiAgICAgICAgICAgIGlmKHRpbWVzdGFtcCA8IDYwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICfliJrliJonO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZih0aW1lc3RhbXAgPj0gNjAgJiYgdGltZXN0YW1wIDwgNjAqNjApIHtcbiAgICAgICAgICAgICAgICBtaW51dGVzID0gcGFyc2VJbnQodGltZXN0YW1wIC8gNjApO1xuICAgICAgICAgICAgICAgIHJldHVybiBtaW51dGVzKyfliIbpkp/liY0nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZih0aW1lc3RhbXAgPj0gNjAqNjAgJiYgdGltZXN0YW1wIDwgNjAqNjAqMjQpIHtcbiAgICAgICAgICAgICAgICBob3VycyA9IHBhcnNlSW50KHRpbWVzdGFtcCAvIDYwIC8gNjApO1xuICAgICAgICAgICAgICAgIHJldHVybiBob3Vycysn5bCP5pe25YmNJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYodGltZXN0YW1wID49IDYwKjYwKjI0ICYmIHRpbWVzdGFtcCA8IDYwKjYwKjI0KjMwKSB7XG4gICAgICAgICAgICAgICAgZGF5cyA9IHBhcnNlSW50KHRpbWVzdGFtcCAvIDYwIC8gNjAgLyAyNCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRheXMgKyAn5aSp5YmNJztcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIHZhciB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgICAgICAgICAgICAgIHZhciBtb250aCA9IGRhdGUuZ2V0TW9udGgoKTtcbiAgICAgICAgICAgICAgICB2YXIgZGF5ID0gZGF0ZS5nZXREYXkoKTtcbiAgICAgICAgICAgICAgICB2YXIgaG91ciA9IGRhdGUuZ2V0SG91cnMoKTtcbiAgICAgICAgICAgICAgICB2YXIgbWludXRlID0gZGF0ZS5nZXRNaW51dGVzKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHllYXIrJy8nK21vbnRoKycvJytkYXkrXCIgXCIraG91citcIjpcIittaW51dGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbn1cblxuSW5kZXgucHJvdG90eXBlLnJ1biA9ZnVuY3Rpb24oKXtcbiAgICB2YXIgc2VsZiA9dGhpcztcbiAgICBzZWxmLkxvYWRNb3JlKCk7XG4gICAgc2VsZi5saXN0ZW5DYXRlZ29yeVN3aXRjaEV2ZW50KCk7XG59O1xuXG4vL+WKoOi9veabtOWkmuaMiemSruS6i+S7tlxuSW5kZXgucHJvdG90eXBlLkxvYWRNb3JlPWZ1bmN0aW9uKCl7XG4gICAgdmFyIHNlbGYgPXRoaXM7XG4gICAgdmFyIGxvYWRCdG49JCgnI2xvYWQtbW9yZS1idG4nKTtcbiAgICBsb2FkQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcblxuICAgICAgICB4ZnphamF4LmdldCh7XG4gICAgICAgICAgICAndXJsJzonL25ld3MvbGlzdC8nLFxuICAgICAgICAgICAgJ2RhdGEnOntcbiAgICAgICAgICAgICAgICAncCc6c2VsZi5wYWdlLFxuICAgICAgICAgICAgICAgICdjYXRlZ29yeV9pZCc6c2VsZi5jYXRlZ29yeV9pZFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdzdWNjZXNzJzpmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYocmVzdWx0Wydjb2RlJ109PT0yMDApe1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3c2VzID0gcmVzdWx0WydkYXRhJ107XG4gICAgICAgICAgICAgICAgICAgIGlmKG5ld3Nlcy5sZW5ndGg+MCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRwbCA9IHRlbXBsYXRlKCduZXdzLWl0ZW0nLCB7J25ld3Nlcyc6IG5ld3Nlc30pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVsID0gJCgnLmxpc3QtaW5uZXItZ3JvdXAnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVsLmFwcGVuZCh0cGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cobmV3c2VzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucGFnZSArPSAxO1xuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRCdG4uaGlkZSgpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfSk7XG59O1xuXG4vL+ebkeWQrOaWsOmXu+exu+WIq+eCueWHu+S6i+S7tlxuSW5kZXgucHJvdG90eXBlLmxpc3RlbkNhdGVnb3J5U3dpdGNoRXZlbnQ9ZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIHNlbGYgPXRoaXM7XG4gICAgICAgIHZhciB0YWdHcm91cD0kKCcubGlzdC10YWInKTtcbiAgICAgICAgdGFnR3JvdXAuY2hpbGRyZW4oKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcGFnZSA9IDE7XG4gICAgICAgICAgICB2YXIgbGkgPSAkKHRoaXMpO1xuICAgICAgICAgICAgIHZhciBjYXRlZ29yeV9pZCA9IGxpLmF0dHIoXCJkYXRhLWNhdGVnb3J5XCIpXG4gICAgICAgICAgICB4ZnphamF4LmdldCh7XG4gICAgICAgICAgICAgICAgJ3VybCc6Jy9uZXdzL2xpc3QvJyxcbiAgICAgICAgICAgICAgICAnZGF0YSc6e1xuICAgICAgICAgICAgICAgICAgICAnY2F0ZWdvcnlfaWQnOmNhdGVnb3J5X2lkLFxuICAgICAgICAgICAgICAgICAgICAncCc6cGFnZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgJ3N1Y2Nlc3MnOmZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0Wydjb2RlJ109PT0yMDApe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld3NlcyA9IHJlc3VsdFsnZGF0YSddO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRwbCA9IHRlbXBsYXRlKCduZXdzLWl0ZW0nLCB7J25ld3Nlcyc6IG5ld3Nlc30pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVsID0gJCgnLmxpc3QtaW5uZXItZ3JvdXAnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVsLmVtcHR5KClcbiAgICAgICAgICAgICAgICAgICAgICAgIHVsLmFwcGVuZCh0cGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5wYWdlID0gMjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY2F0ZWdvcnlfaWQgPSBjYXRlZ29yeV9pZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpLmFkZENsYXNzKCdhY3RpdmUnKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubG9hZEJ0bi5zaG93KClcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcblxufTtcblxuXG4kKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYmFubmVyID1uZXcgQmFubmVyKCk7XG4gICAgYmFubmVyLnJ1bigpO1xuICAgIHZhciBpbmRleCA9bmV3IEluZGV4KCk7XG4gICAgaW5kZXgucnVuKCk7XG5cbn0pOyJdfQ==
