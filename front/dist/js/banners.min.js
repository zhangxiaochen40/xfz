function Banners(){}Banners.prototype.LoadData=function(){var s=this;xfzajax.get({url:"/cms/banner_list/",success:function(n){if(200===n.code)for(var e=n.data,a=0;a<e.length;a++){var t=e[a],r=template("banner-item",{banner:t}),i=$(".banner-list-group");i.append(r);var o=i.find(".banner-item:last");s.addImageSelectEvent(o),s.addRemoveBtn(o),s.saveBannerEvent(o)}else console.log("cuowu")}})},Banners.prototype.listenBannersAddBtn=function(){var t=this;$("#banner-add-btn").click(function(){if(6<=$(".banner-list-group").children().length)window.messageBox.showError("最多不能超过6张轮波图");else{var n=template("banner-item"),e=$(".banner-list-group");e.prepend(n);var a=e.find(".banner-item:first");t.addImageSelectEvent(a),t.addRemoveBtn(a),t.saveBannerEvent(a)}})},Banners.prototype.saveBannerEvent=function(t){var n=t.find(".btn-save"),r=t.find("input[name='priority']"),i=t.find("input[name='link_to']"),o=t.find(".thumbnail"),s=t.attr("data-banner-id"),c=t.find('span[class="priority"]'),d="";d=s?"/cms/edit_banner/":"/cms/add_banner/",n.click(function(){var n=o.attr("src"),e=r.val(),a=i.val();xfzajax.post({url:d,data:{img_url:n,priority:e,link_to:a,pk:s},success:function(n){200===n.code&&(s?window.messageBox.showSuccess("轮播图修改完成！"):(s=n.data.banner_id,t.attr("data-banner-id",s),window.messageBox.showSuccess("轮播图添加完成！")),c.text("优先级："+e))}})})},Banners.prototype.addImageSelectEvent=function(n){var a=n.find(".thumbnail"),e=n.find(".image-input");a.click(function(){e.click()}),e.change(function(){var n=this.files[0],e=new FormData;e.append("file",n),xfzajax.post({url:"/cms/upload_file/",data:e,processData:!1,contentType:!1,success:function(n){if(200===n.code){var e=n.data.url;a.attr("src",e)}}})})},Banners.prototype.addRemoveBtn=function(e){e.find(".btn-close").click(function(){var n=e.attr("data-banner-id");n?xfzalert.alertConfirm({text:"确定要删除吗",confirmCallback:function(){xfzajax.post({url:"/cms/delete_banner/",data:{banner_id:n},success:function(n){200===n.code&&(e.remove(),window.messageBox.showSuccess("轮播图删除成功"))}})}}):e.remove()})},Banners.prototype.Run=function(){this.listenBannersAddBtn(),this.LoadData()},$(function(){(new Banners).Run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhbm5lcnMuanMiXSwibmFtZXMiOlsiQmFubmVycyIsInByb3RvdHlwZSIsIkxvYWREYXRhIiwic2VsZiIsInRoaXMiLCJ4ZnphamF4IiwiZ2V0IiwidXJsIiwic3VjY2VzcyIsInJlc3VsdCIsImJhbm5lcnMiLCJpIiwibGVuZ3RoIiwiYmFubmVyIiwidHBsIiwidGVtcGxhdGUiLCJiYW5uZXJHcm91cCIsIiQiLCJhcHBlbmQiLCJiYW5uZXJJdGVtIiwiZmluZCIsImFkZEltYWdlU2VsZWN0RXZlbnQiLCJhZGRSZW1vdmVCdG4iLCJzYXZlQmFubmVyRXZlbnQiLCJjb25zb2xlIiwibG9nIiwibGlzdGVuQmFubmVyc0FkZEJ0biIsImNsaWNrIiwiY2hpbGRyZW4iLCJ3aW5kb3ciLCJtZXNzYWdlQm94Iiwic2hvd0Vycm9yIiwicHJlcGVuZCIsInNhdmVCdG4iLCJwcmlvcml0eVRhZyIsImxpbmtfdG9UYWciLCJpbWFnZVRhZyIsImJhbm5lcklkIiwiYXR0ciIsInByaW9yaXR5U3BhbiIsImltZ191cmwiLCJwcmlvcml0eSIsInZhbCIsImxpbmtfdG8iLCJwb3N0IiwiZGF0YSIsInBrIiwic2hvd1N1Y2Nlc3MiLCJ0ZXh0IiwiaW1hZ2UiLCJpbWFnZUlucHV0IiwiY2hhbmdlIiwiZmlsZSIsImZpbGVzIiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsInByb2Nlc3NEYXRhIiwiY29udGVudFR5cGUiLCJ4ZnphbGVydCIsImFsZXJ0Q29uZmlybSIsImNvbmZpcm1DYWxsYmFjayIsImJhbm5lcl9pZCIsInJlbW92ZSIsIlJ1biJdLCJtYXBwaW5ncyI6IkFBQUEsU0FBU0EsV0FLVEEsUUFBUUMsVUFBVUMsU0FBVyxXQUN6QixJQUFJQyxFQUFNQyxLQUNWQyxRQUFRQyxJQUFJLENBQ1JDLElBQU0sb0JBQ05DLFFBQVUsU0FBVUMsR0FDaEIsR0FBb0IsTUFBakJBLEVBQWEsS0FFWixJQURELElBQUlDLEVBQVVELEVBQWEsS0FDakJFLEVBQUUsRUFBRUEsRUFBRUQsRUFB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QUNUM0QsS0FDTHNCLHNCQURLdEIsS0FFTEYsWUFHVGUsRUFBRSxZQUNlLElBQUlqQixTQUNUK0QiLCJmaWxlIjoiYmFubmVycy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBCYW5uZXJzKCkge1xuXG59XG5cblxuQmFubmVycy5wcm90b3R5cGUuTG9hZERhdGEgPSBmdW5jdGlvbigpe1xuICAgIHZhciBzZWxmID10aGlzO1xuICAgIHhmemFqYXguZ2V0KHtcbiAgICAgICAgJ3VybCc6Jy9jbXMvYmFubmVyX2xpc3QvJyxcbiAgICAgICAgJ3N1Y2Nlc3MnOmZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgIGlmKHJlc3VsdFsnY29kZSddPT09MjAwKXtcbiAgICAgICAgICAgICAgIHZhciBiYW5uZXJzID0gcmVzdWx0WydkYXRhJ107XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaT0wO2k8YmFubmVycy5sZW5ndGg7aSsrKXtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJhbm5lciA9IGJhbm5lcnNbaV07XG4gICAgICAgICAgICAgICAgICAgIHZhciB0cGwgPSB0ZW1wbGF0ZSgnYmFubmVyLWl0ZW0nLHsnYmFubmVyJzpiYW5uZXJ9KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJhbm5lckdyb3VwPSQoJy5iYW5uZXItbGlzdC1ncm91cCcpO1xuICAgICAgICAgICAgICAgICAgICBiYW5uZXJHcm91cC5hcHBlbmQodHBsKTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgYmFubmVySXRlbSA9IGJhbm5lckdyb3VwLmZpbmQoJy5iYW5uZXItaXRlbTpsYXN0Jyk7XG5cbiAgICAgICAgICAgICAgICAgICAgc2VsZi5hZGRJbWFnZVNlbGVjdEV2ZW50KGJhbm5lckl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmFkZFJlbW92ZUJ0bihiYW5uZXJJdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5zYXZlQmFubmVyRXZlbnQoYmFubmVySXRlbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfWVsc2VcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnY3Vvd3UnKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSlcbn07XG5cblxuQmFubmVycy5wcm90b3R5cGUubGlzdGVuQmFubmVyc0FkZEJ0biA9ZnVuY3Rpb24oKXtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGJhbm5lckJ0biA9JCgnI2Jhbm5lci1hZGQtYnRuJyk7XG4gICAgYmFubmVyQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGJhbm5lcmxpc3RHcm91cCA9ICQoJy5iYW5uZXItbGlzdC1ncm91cCcpO1xuICAgICAgICB2YXIgYmFubmVySXRlbXMgPSBiYW5uZXJsaXN0R3JvdXAuY2hpbGRyZW4oKS5sZW5ndGg7XG4gICAgICAgIGlmIChiYW5uZXJJdGVtcz49Nil7XG4gICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93RXJyb3IoXCLmnIDlpJrkuI3og73otoXov4c25byg6L2u5rOi5Zu+XCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0cGwgPXRlbXBsYXRlKCdiYW5uZXItaXRlbScpO1xuICAgICAgICB2YXIgYmFubmVyR3JvdXA9JCgnLmJhbm5lci1saXN0LWdyb3VwJyk7XG4gICAgICAgIGJhbm5lckdyb3VwLnByZXBlbmQodHBsKTtcblxuICAgICAgICB2YXIgYmFubmVySXRlbSA9IGJhbm5lckdyb3VwLmZpbmQoJy5iYW5uZXItaXRlbTpmaXJzdCcpO1xuXG4gICAgICAgIHNlbGYuYWRkSW1hZ2VTZWxlY3RFdmVudChiYW5uZXJJdGVtKTtcbiAgICAgICAgc2VsZi5hZGRSZW1vdmVCdG4oYmFubmVySXRlbSk7XG4gICAgICAgIHNlbGYuc2F2ZUJhbm5lckV2ZW50KGJhbm5lckl0ZW0pO1xuICAgIH0pXG59O1xuXG5cbkJhbm5lcnMucHJvdG90eXBlLnNhdmVCYW5uZXJFdmVudCA9IGZ1bmN0aW9uKGJhbm5lckl0ZW0pe1xuICAgIHZhciBzYXZlQnRuID0gYmFubmVySXRlbS5maW5kKCcuYnRuLXNhdmUnKTtcbiAgICB2YXIgcHJpb3JpdHlUYWcgPSBiYW5uZXJJdGVtLmZpbmQoXCJpbnB1dFtuYW1lPSdwcmlvcml0eSddXCIpO1xuICAgIHZhciBsaW5rX3RvVGFnID0gYmFubmVySXRlbS5maW5kKChcImlucHV0W25hbWU9J2xpbmtfdG8nXVwiKSk7XG4gICAgdmFyIGltYWdlVGFnID0gYmFubmVySXRlbS5maW5kKFwiLnRodW1ibmFpbFwiKTtcbiAgICB2YXIgYmFubmVySWQgPSBiYW5uZXJJdGVtLmF0dHIoJ2RhdGEtYmFubmVyLWlkJyk7XG4gICAgdmFyIHByaW9yaXR5U3BhbiA9IGJhbm5lckl0ZW0uZmluZCgnc3BhbltjbGFzcz1cInByaW9yaXR5XCJdJyk7XG4gICAgdmFyIHVybD0nJztcbiAgICBpZihiYW5uZXJJZCl7XG4gICAgICAgIHVybD0nL2Ntcy9lZGl0X2Jhbm5lci8nXG4gICAgfWVsc2V7XG4gICAgICAgIHVybD0nL2Ntcy9hZGRfYmFubmVyLydcbiAgICB9XG5cbiAgICBzYXZlQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGltZ191cmwgPSBpbWFnZVRhZy5hdHRyKCdzcmMnKTtcbiAgICAgICAgdmFyIHByaW9yaXR5ID0gcHJpb3JpdHlUYWcudmFsKCk7XG4gICAgICAgIHZhciBsaW5rX3RvID0gbGlua190b1RhZy52YWwoKTtcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcbiAgICAgICAgICAgICd1cmwnOnVybCxcbiAgICAgICAgICAgICdkYXRhJzp7XG4gICAgICAgICAgICAgICAgJ2ltZ191cmwnOmltZ191cmwsXG4gICAgICAgICAgICAgICAgJ3ByaW9yaXR5Jzpwcmlvcml0eSxcbiAgICAgICAgICAgICAgICAnbGlua190byc6bGlua190byxcbiAgICAgICAgICAgICAgICAncGsnOiBiYW5uZXJJZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnc3VjY2Vzcyc6ZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXT09PTIwMCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihiYW5uZXJJZCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd1N1Y2Nlc3MoJ+i9ruaSreWbvuS/ruaUueWujOaIkO+8gScpXG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFubmVySWQgPSByZXN1bHRbJ2RhdGEnXVsnYmFubmVyX2lkJ107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFubmVySXRlbS5hdHRyKCdkYXRhLWJhbm5lci1pZCcsIGJhbm5lcklkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93U3VjY2Vzcygn6L2u5pKt5Zu+5re75Yqg5a6M5oiQ77yBJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmlvcml0eVNwYW4udGV4dChcIuS8mOWFiOe6p++8mlwiK3ByaW9yaXR5KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH0pXG59O1xuXG5cbkJhbm5lcnMucHJvdG90eXBlLmFkZEltYWdlU2VsZWN0RXZlbnQgPSBmdW5jdGlvbiAoYmFubmVySXRlbSkge1xuICAgIHZhciBpbWFnZSA9IGJhbm5lckl0ZW0uZmluZCgnLnRodW1ibmFpbCcpO1xuICAgIHZhciBpbWFnZUlucHV0ID0gYmFubmVySXRlbS5maW5kKCcuaW1hZ2UtaW5wdXQnKTtcbiAgICAvLyDlm77niYfmmK/kuI3og73lpJ/miZPlvIDmlofku7bpgInmi6nmoYbnmoTvvIzlj6rog73pgJrov4dpbnB1dFt0eXBlPSdmaWxlJ11cbiAgICBpbWFnZS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIGltYWdlSW5wdXQuY2xpY2soKTtcbiAgICB9KTtcblxuICAgIGltYWdlSW5wdXQuY2hhbmdlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGZpbGUgPSB0aGlzLmZpbGVzWzBdO1xuICAgICAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcbiAgICAgICAgZm9ybURhdGEuYXBwZW5kKFwiZmlsZVwiLGZpbGUpO1xuICAgICAgICB4ZnphamF4LnBvc3Qoe1xuICAgICAgICAgICAgJ3VybCc6ICcvY21zL3VwbG9hZF9maWxlLycsXG4gICAgICAgICAgICAnZGF0YSc6IGZvcm1EYXRhLFxuICAgICAgICAgICAgJ3Byb2Nlc3NEYXRhJzogZmFsc2UsXG4gICAgICAgICAgICAnY29udGVudFR5cGUnOiBmYWxzZSxcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGlmKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xuICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gcmVzdWx0WydkYXRhJ11bJ3VybCddO1xuICAgICAgICAgICAgICAgICAgICBpbWFnZS5hdHRyKCdzcmMnLHVybCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn07XG5cblxuQmFubmVycy5wcm90b3R5cGUuYWRkUmVtb3ZlQnRuID0gZnVuY3Rpb24oYmFubmVySXRlbSl7XG4gICAgdmFyIHJlbW92ZUJ0biA9IGJhbm5lckl0ZW0uZmluZCgnLmJ0bi1jbG9zZScpO1xuXG4gICAgcmVtb3ZlQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGJhbm5lcklkID0gYmFubmVySXRlbS5hdHRyKCdkYXRhLWJhbm5lci1pZCcpO1xuICAgICAgICBpZihiYW5uZXJJZClcbiAgICAgICAge1xuICAgICAgICAgICAgeGZ6YWxlcnQuYWxlcnRDb25maXJtKHtcbiAgICAgICAgICAgICAgICAndGV4dCc6J+ehruWumuimgeWIoOmZpOWQlycsXG4gICAgICAgICAgICAgICAgJ2NvbmZpcm1DYWxsYmFjayc6ZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB4ZnphamF4LnBvc3Qoe1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3VybCc6Jy9jbXMvZGVsZXRlX2Jhbm5lci8nLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RhdGEnOntcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYmFubmVyX2lkJzpiYW5uZXJJZFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdzdWNjZXNzJzpmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0Wydjb2RlJ109PT0yMDApe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYW5uZXJJdGVtLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93U3VjY2Vzcygn6L2u5pKt5Zu+5Yig6Zmk5oiQ5YqfJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgIHtcbiAgICAgICAgICAgIGJhbm5lckl0ZW0ucmVtb3ZlKClcbiAgICAgICAgfVxuICAgICAgICBcbiAgICB9KVxufTtcblxuQmFubmVycy5wcm90b3R5cGUuUnVuID1mdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPXRoaXM7XG4gICAgc2VsZi5saXN0ZW5CYW5uZXJzQWRkQnRuKCk7XG4gICAgc2VsZi5Mb2FkRGF0YSgpO1xufTtcblxuJChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGJhbm5lcnMgPW5ldyBCYW5uZXJzKCk7XG4gICAgYmFubmVycy5SdW4oKVxufSk7Il19
